# Menu
+ [Описание задачи](#description)
+ [WORK PLAN](#WORK)

### Описание задачи:
<a id="description"></a>
+ [Требования к классам приложения;](#Requirements)
+ [Необходимые операции;](#operations)
+ [Алгоритм работы приложения;](#Algorithm)

> Необходимо ознакомиться с заготовкой и доработать приложение, которое взаимодействует с базой оперируя пользователем 
(класс User) и проверить свои методы заранее написанными JUnit тестами. По итогу все тесты должны быть пройдены. 
Разрешается посмотреть реализацию тестов.
***
Для запуска теста необходимо найти класс в папке test ( показано в предыдущей лекции ) и при нажатии на него правой 
кнопкой мыши запустить, выбрав Run "Имя класса"

Класс UserHibernateDaoImpl в рамках этой задачи не затрагивается (остаётся пустой)

___User представляет из себя сущность с полями:___

>- __Long__ *id* 
>- __String__ *name* 
>- __String__ _lastName_ 
>- __Byte__ _age_

***
Архитектура приложения создана с опорой на паттерн проектирования MVC ( частично, у нас не WEB приложение)

Ознакомиться с паттерном можно здесь

<a id="Requirements"></a>  
### Требования к классам приложения: 
1. Классы dao/service должны реализовывать соответствующие интерфейсы
2. Класс dao должен иметь конструктор пустой/по умолчанию
3. Все поля должны быть private
4. service переиспользует методы dao
5. Обработка всех исключений, связанных с работой с базой данных должна находиться в dao
6. Класс Util должен содержать логику настройки соединения с базой данных

<a id="operations"></a>
### Необходимые операции: 
1. Создание таблицы для User(ов) – не должно приводить к исключению, если такая таблица уже существует
2. Удаление таблицы User(ов) – не должно приводить к исключению, если таблицы не существует
3. Очистка содержания таблицы
4. Добавление User в таблицу
````
5. Удаление User из таблицы ( по id )
````

6. Получение всех User(ов) из таблицы

<a id="Algorithm"></a>
### Алгоритм работы приложения:
В методе main класса Main должны происходить следующие операции:
1. Создание таблицы User(ов)
2. Добавление 4 User(ов) в таблицу с данными на свой выбор. После каждого добавления должен быть вывод в консоль 
( User с именем – name добавлен в базу данных )
3. ___Получение всех User из базы и вывод в консоль ( должен быть переопределен toString в классе User)___
4. _Очистка таблицы User(ов)_
5.     __Удаление таблицы__
--- 
***
#### WORK_PLAN 
<a id="WORK"></a>
### Util
https://javarush.com/groups/posts/2172-jdbc-ili-s-chego-vsje-nachinaetsja 
````
    JDBC (Java DataBase Connectivity — соединение с базами данных на Java). Это стандарт взаимодействия Java-приложений с 
различными СУБД, реализованный в виде пакетов java.sql и javax.sql, входящих в состав Java SE.
Поэтому, всё начинается с Connectivity - возможности устанавливать подключение. А подключение — это Connection.

    В главе "CHAPTER 4 Overview" (overview - обзор) обратимся к разделу "4.1 Establishing a Connection" (установление соединения) 
сказано, что существует два способа подключения к БД:
* Через DriverManager
* Через DataSource
    
    Разберёмся с DriverManager'ом. Как сказано, DriverManager позволяет подключиться к базе данных по указанному URL, 
 а так же загружает JDBC Driver'ы, который он нашёл в CLASSPATH (а раньше, до JDBC 4.0 загружать класс драйвера надо 
 было самостоятельно).
    Про соединение с БД есть отдельная глава "CHAPTER 9 Connections". Нас интересует, как получить соединение через DriverManager, 
 поэтому нам интересен раздел "9.3 The DriverManager Class". В нём указано, как мы можем получить доступ к БД:
````
````
> Connection con = DriverManager.getConnection(url, user, passwd);
> private Connection getNewConnection() throws SQLException {
> String url = "jdbc:h2:mem:test";
> String user = "sa";
> String passwd = "sa";
> return DriverManager.getConnection(url, user, passwd);
> }
````

[___Класс Statement___ + на сайт](https://java-online.ru/jdbc-statement.xhtml)

````
Statement используется для выполнения SQL-запросов. Существует три типа класса Statement, 
которые являются как бы контейнерами для выполнения SQL-выражений через установленное соединение:
1. Statement, базовый;
2. PreparedStatement, наследующий от Statement;
3. CallableStatement, наследующий от PreparedStatement.

!!! Объекты Statement закрываются автоматически сборщиком мусора виртуальной машины Java. 
!!! Тем не менее рекомендуется закрывать их явно после того, как работа с ними завершена
````
````
Все классы специализируются для выполнения различных типов запросов:

    * Statement предназначен для выполнения простых SQL-запросов без параметров; 
содержит три различных метода выполнения SQL-выражений : executeQuery, executeUpdate и execute, которые вызываются в зависимости от текста SQL-запроса..
    * PreparedStatement используется для выполнения SQL-запросов с или без входных параметров; добавляет методы управления входными параметрами.
наследующий все методы Statement, имеет свои реализации методов executeQuery, executeUpdate и execute. 
Объекты PreparedStatement не принимают SQL-выражения в виде аргументов этих методов, так как они уже содержат прекомпилированные SQL-выражения.
    * CallableStatement используется для вызовов хранимых процедур; добавляет методы для манипуляции выходными параметрами.
наследуют методы от PreparedStatement без параметров. 
Использование аргументов в методах executeXXX объектов PreparedStatement и CallableStatement приведет к генерации ошибки SQLException.
````
```
Создание объектов Statement
После установления соединения Connection с базой данных, оно может использоваться для выполнения SQL-запросов. Объект Statement создается методом Connection.createStatement.
```
```
Пример :
Connection conn = DriverManager.getConnection(url, username, password);
> Statement  stmt = conn.createStatement();

Для отправки серверу БД SQL-выражения для выполнения необходимо вызвать метод executeQuery объекта Statement и в качестве аргумента передать скрипт запроса :
> ResultSet rs = stmt.executeQuery("SELECT * FROM USERS");
```

